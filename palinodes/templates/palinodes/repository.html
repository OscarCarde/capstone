{% extends 'palinodes/layout.html' %}
{% load static %}

{% block title %}index{% endblock %}
{% block script %}
        <script  src={% static 'palinodes/index.js' %}></script>
{% endblock script %}

{% block navbar %}
<li id="dash-btn">
    {% if user.profile.avatar %}
    <img id="avatar-sm" src={{user.profile.avatar.url}}>
    {% else %}
    <img style="background-color: black;" id="avatar-sm" src='/media/Default-Profile-Picture.png' >
    {% endif %}
    <a href={% url 'dashboard' %}>Dashboard</a></li>
{% endblock navbar %}

{% block body %}
    <div id="repository-container">
        <div id=repository-details>
            <div class="clickable" id="repository-settings">
                <svg width="19" height="20" viewBox="0 0 19 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M9.1394 1.88156C9.37075 1.86138 9.60513 1.85106 9.84212 1.85106C10.0791 1.85106 10.3135 1.86138 10.5449 1.88156C10.5885 1.88536 10.6779 1.92695 10.7131 2.062L11.0687 3.42597C11.2491 4.1177 11.7443 4.61874 12.2956 4.89265C12.5091 4.9987 12.7149 5.11823 12.9119 5.25015C13.4244 5.59343 14.1052 5.7733 14.7931 5.58401L16.1499 5.21056C16.2839 5.17367 16.3646 5.23025 16.39 5.26638C16.6588 5.65004 16.8947 6.05821 17.094 6.48679C17.1122 6.52611 17.1212 6.62424 17.0222 6.7224L16.0198 7.71595C15.5135 8.21775 15.328 8.89755 15.367 9.51346C15.3745 9.632 15.3783 9.75165 15.3783 9.87234C15.3783 9.99303 15.3745 10.1127 15.367 10.2312C15.328 10.8471 15.5135 11.5269 16.0198 12.0287L17.0222 13.0222C17.1212 13.1205 17.1122 13.2186 17.094 13.2579C16.8947 13.6865 16.6588 14.0946 16.39 14.4783C16.3646 14.5144 16.2839 14.571 16.1499 14.5342L14.7931 14.1606C14.1052 13.9713 13.4244 14.1513 12.9119 14.4946C12.7149 14.6265 12.5091 14.7459 12.2956 14.8521C11.7443 15.1259 11.2491 15.6269 11.0687 16.3187L10.7131 17.6827C10.6779 17.8177 10.5885 17.8593 10.5449 17.8631C10.3135 17.8833 10.0791 17.8936 9.84212 17.8936C9.60513 17.8936 9.37075 17.8833 9.1394 17.8631C9.09572 17.8593 9.00637 17.8177 8.97116 17.6827L8.6155 16.3186C8.43515 15.6269 7.93993 15.1259 7.38864 14.8521C7.17517 14.7459 6.96941 14.6265 6.77246 14.4946C6.25991 14.1513 5.57903 13.9713 4.89126 14.1606L3.53429 14.5342C3.40031 14.571 3.31959 14.5144 3.29427 14.4783C3.02549 14.0946 2.78949 13.6865 2.59025 13.2579C2.57197 13.2186 2.563 13.1205 2.66203 13.0222L3.66454 12.0287C4.17082 11.5269 4.35638 10.8471 4.31731 10.2312C4.3098 10.1127 4.30598 9.993 4.30598 9.87234C4.30598 9.75168 4.3098 9.63202 4.31731 9.51351C4.35638 8.89761 4.17082 8.21781 3.66454 7.71602L2.66203 6.7224C2.563 6.62425 2.57197 6.52612 2.59025 6.48681C2.78949 6.05821 3.02549 5.65004 3.29428 5.26638C3.31959 5.23025 3.40031 5.17369 3.53429 5.21056L4.89126 5.58402C5.57903 5.77331 6.25991 5.59345 6.77246 5.25016C6.96941 5.11825 7.17517 4.99872 7.38864 4.89267C7.93992 4.61876 8.43515 4.11773 8.6155 3.42601L8.97116 2.062C9.00637 1.92695 9.09572 1.88536 9.1394 1.88156ZM9.84212 0C9.55171 0 9.26401 0.0126428 8.97957 0.0374452C8.06576 0.117128 7.39379 0.796009 7.18581 1.59362L6.83016 2.95764C6.80868 3.04005 6.73309 3.15268 6.56954 3.23394C6.2846 3.37551 6.01017 3.53494 5.74771 3.71073C5.59641 3.81206 5.46156 3.82151 5.37955 3.79894L4.02259 3.42547C3.23123 3.20767 2.31079 3.45074 1.78441 4.2021C1.4538 4.67402 1.16323 5.17648 0.917755 5.70451C0.530261 6.53806 0.781019 7.46034 1.36497 8.03912L2.36749 9.03273C2.42794 9.09266 2.48717 9.21431 2.47564 9.39599C2.46565 9.5536 2.46058 9.71245 2.46058 9.87234C2.46058 10.0322 2.46565 10.1911 2.47564 10.3487C2.48717 10.5304 2.42794 10.652 2.36749 10.7119L1.36497 11.7056C0.781017 12.2843 0.530261 13.2066 0.917755 14.0402C1.16323 14.5682 1.4538 15.0706 1.78441 15.5425C2.31079 16.2939 3.23123 16.537 4.02259 16.3192L5.37955 15.9458C5.46156 15.9232 5.59642 15.9326 5.74771 16.0339C6.01017 16.2098 6.2846 16.3692 6.56954 16.5107C6.73309 16.5919 6.80868 16.7046 6.83016 16.7871L7.18581 18.151C7.39379 18.9487 8.06576 19.6276 8.97957 19.7073C9.26401 19.7321 9.55171 19.7447 9.84212 19.7447C10.1325 19.7447 10.4202 19.7321 10.7047 19.7073C11.6185 19.6276 12.2905 18.9487 12.4984 18.151L12.8541 16.7871C12.8756 16.7046 12.9511 16.5921 13.1147 16.5107C13.3997 16.3692 13.6741 16.2098 13.9366 16.0339C14.0879 15.9326 14.2227 15.9232 14.3048 15.9458L15.6616 16.3192C16.4531 16.537 17.3734 16.2939 17.8999 15.5426C18.2304 15.0706 18.521 14.5682 18.7665 14.0402C19.154 13.2066 18.9033 12.2844 18.3193 11.7056L17.3168 10.712C17.2563 10.6521 17.1971 10.5304 17.2087 10.3488C17.2187 10.1911 17.2237 10.0323 17.2237 9.87234C17.2237 9.71242 17.2187 9.55356 17.2087 9.39593C17.1971 9.21425 17.2563 9.09259 17.3168 9.03267L18.3193 8.03911C18.9033 7.46033 19.154 6.53804 18.7665 5.7045C18.521 5.17646 18.2304 4.67401 17.8999 4.2021C17.3734 3.45073 16.4531 3.20767 15.6616 3.42547L14.3048 3.79891C14.2227 3.82148 14.0879 3.81204 13.9366 3.71072C13.6741 3.53491 13.3997 3.37548 13.1147 3.23389C12.9511 3.15265 12.8756 3.04001 12.8541 2.95759L12.4984 1.59362C12.2905 0.796007 11.6185 0.117126 10.7047 0.0374441C10.4202 0.0126424 10.1325 0 9.84212 0ZM11.6875 9.87234C11.6875 10.8947 10.8613 11.7234 9.84212 11.7234C8.82294 11.7234 7.99673 10.8947 7.99673 9.87234C7.99673 8.85002 8.82294 8.02128 9.84212 8.02128C10.8613 8.02128 11.6875 8.85002 11.6875 9.87234ZM13.5329 9.87234C13.5329 11.917 11.8805 13.5745 9.84212 13.5745C7.80376 13.5745 6.15133 11.917 6.15133 9.87234C6.15133 7.82772 7.80376 6.17021 9.84212 6.17021C11.8805 6.17021 13.5329 7.82772 13.5329 9.87234Z" fill="white"/>
                    </svg>
                    <p>Settings</p>
            </div>
            <div id="repository-details-details">
                <h2>{{repository.name}}</h2>
                <h5>{{repository.description}}</h3>
            </div>
            <div id="repository-details-collaborators">
                <div>
                    <h4>Owned by</h4>
                    <h4>{{repository.owner.username}}</h4>
                </div>
                <div>
                    <p><strong>Collaborating:</strong></p>
                    {% for collaborator in repository.collaborators.all %}
                    <p>{{collaborator.username}}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
        
        <div id="repository-contents">
            <div id="repository-contents-topbar">
                <p>{{repository.name}} /</p>
                <button id="new-directory" class="clickable">
                    <svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M24.7278 0.803482C24.6135 0.689204 24.4585 0.625 24.2969 0.625C24.1353 0.625 23.9803 0.689204 23.866 0.803482C23.7517 0.91776 23.6875 1.07276 23.6875 1.23438V4.6875H20.2344C20.0728 4.6875 19.9178 4.7517 19.8035 4.86598C19.6892 4.98026 19.625 5.13526 19.625 5.29688C19.625 5.45849 19.6892 5.61349 19.8035 5.72777C19.9178 5.84205 20.0728 5.90625 20.2344 5.90625H23.6875V9.35938C23.6875 9.52098 23.7517 9.67601 23.866 9.79024C23.9803 9.90456 24.1353 9.96875 24.2969 9.96875C24.4585 9.96875 24.6135 9.90456 24.7278 9.79024C24.842 9.67601 24.9062 9.52098 24.9062 9.35938V5.90625H28.3594C28.521 5.90625 28.676 5.84205 28.7902 5.72777C28.9046 5.61349 28.9688 5.45849 28.9688 5.29688C28.9688 5.13526 28.9046 4.98026 28.7902 4.86598C28.676 4.7517 28.521 4.6875 28.3594 4.6875H24.9062V1.23438C24.9062 1.07276 24.842 0.91776 24.7278 0.803482ZM9.10054 13.3614L9.10064 13.3615C9.28278 13.4525 9.48369 13.5 9.6875 13.5H17.8125C18.1274 13.5 18.4294 13.6251 18.6522 13.8478C18.8749 14.0705 19 14.3726 19 14.6875V25.3125C19 25.6273 18.8749 25.9294 18.6521 26.1521C18.4294 26.3749 18.1273 26.5 17.8125 26.5H2.1875C1.53228 26.5 1 25.9677 1 25.3125V12.1875C1 11.8726 1.12511 11.5705 1.34781 11.3478C1.57051 11.1251 1.87255 11 2.1875 11H6.5625C6.93524 11 7.28885 11.1768 7.5125 11.475L8.6375 12.975L8.63753 12.975C8.75975 13.138 8.91824 13.2703 9.10054 13.3614ZM9.4375 12.375C9.46661 12.4138 9.50435 12.4453 9.54775 12.467C9.59114 12.4887 9.63899 12.5 9.6875 12.5H17.8125C18.3926 12.5 18.949 12.7305 19.3592 13.1407C19.7695 13.5509 20 14.1073 20 14.6875V25.3125C20 25.8926 19.7695 26.449 19.3592 26.8592C18.949 27.2695 18.3926 27.5 17.8125 27.5H2.1875C0.98 27.5 0 26.52 0 25.3125V12.1875C0 11.6073 0.230467 11.0509 0.640704 10.6407C1.05094 10.2305 1.60734 10 2.1875 10H6.5625C7.25 10 7.9 10.325 8.3125 10.875L9.4375 12.375Z" fill="white"/>
                        </svg>
                        
                </button>
            </div>
            <div id="contents">
                {% for directory in repository.subdirectories.all %}
                <div class="file-entries">
                    <svg width="30" height="23" viewBox="0 0 41 34" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M4.48438 0.920502C3.29504 0.920502 2.15443 1.35325 1.31344 2.12358C0.472458 2.89391 0 3.9387 0 5.0281V29.6737C0 31.9411 2.009 33.7813 4.48438 33.7813H36.5156C37.7049 33.7813 38.8455 33.3485 39.6865 32.5781C40.5275 31.8078 41 30.763 41 29.6737V9.7225C41 8.63309 40.5275 7.58831 39.6865 6.81798C38.8455 6.04765 37.7049 5.6149 36.5156 5.6149H19.8594C19.7599 5.6149 19.6618 5.59368 19.5729 5.55296C19.4839 5.51221 19.4066 5.45306 19.3469 5.38018L17.0406 2.56354C16.195 1.53077 14.8625 0.920502 13.4531 0.920502H4.48438Z" fill="white"/>
                        </svg>
                        
                    <p>{{directory.name}}</p>
                </div>
                
                {% endfor %}
                {% for file in repository.files.all %}
                <div class="file-entries">
                    <svg width="25" height="30" viewBox="0 0 33 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M5.14026 3.5625C4.80371 3.5625 4.53088 3.82833 4.53088 4.15625V33.8438C4.53088 34.1717 4.80371 34.4375 5.14026 34.4375H28.2965C28.6331 34.4375 28.9059 34.1717 28.9059 33.8438V14.25H22.2028C19.8469 14.25 17.9371 12.3892 17.9371 10.0938V3.5625H5.14026ZM21.5934 3.70855V10.0938C21.5934 10.4217 21.8662 10.6875 22.2028 10.6875H28.756C28.7468 10.6773 28.7373 10.6673 28.7274 10.6577L21.624 3.7364C21.6141 3.72675 21.6039 3.71746 21.5934 3.70855ZM0.874634 4.15625C0.874634 1.86082 2.78442 0 5.14026 0H21.1931C22.3244 0 23.4094 0.437889 24.2094 1.21734L31.3128 8.13859C32.1127 8.91804 32.5621 9.9752 32.5621 11.0775V33.8438C32.5621 36.1392 30.6523 38 28.2965 38H5.14026C2.78442 38 0.874634 36.1392 0.874634 33.8438V4.15625Z" fill="white"/>
                        </svg>
                        
                    <p>{{file.filename}}</p>
                </div>
                
                {% endfor %}
            </div>
        </div>

        <div id="soundwave">
        </div>

        <div id="chat">
        </div>
    </div>
{% endblock %}